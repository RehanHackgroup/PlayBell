<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>

<div class="top-bar admin">
  <div class="logo">PlayBell - Admin</div>
  <div class="nav-links">
    <a href="/songs">All Songs</a>
    <a href="/admin/requests">Song Requests</a>
    <form method="POST" action="/logout" style="display:inline;">
      <button class="small-btn">Logout</button>
    </form>
  </div>
</div>

<div class="container">

  <div class="card">
    <h3>Add New Song</h3>

    <form method="POST" action="/admin/add-song" enctype="multipart/form-data">
      <label>Title
        <input type="text" name="title" required>
      </label>

      <label>Artist
        <input type="text" name="artist" required>
      </label>

      <label>MP3 File
        <input type="file" name="mp3file" accept=".mp3" required>
      </label>

      <button type="submit">Upload Song</button>
    </form>
  </div>

  <div class="card">
    <h3>All Songs</h3>

    <table class="song-table">
      <tr>
        <th>Title</th>
        <th>Artist</th>
        <th>Status</th>
        <th>Controls</th>
      </tr>

      <% songs.forEach(function(song){ %>
        <tr>
          <td><%= song.title %></td>
          <td><%= song.artist %></td>
          <td>
            <b style="color: <%= song.muted ? '#e53935' : '#43a047' %>">
              <%= song.muted ? "Muted" : "Active" %>
            </b>
          </td>
          <td>
            <form method="POST" action="/admin/toggle-mute" style="display:inline;">
              <input type="hidden" name="id" value="<%= song.id %>">
              <button class="small-btn">
                <%= song.muted ? "Unmute" : "Mute" %>
              </button>
            </form>

            <form method="POST" action="/admin/delete-song" style="display:inline;">
              <input type="hidden" name="id" value="<%= song.id %>">
              <button class="small-btn danger">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>

    </table>
  </div>

</div>

</body>
</html>
